{
  "info": {
    "_postman_id": "cb3a8b96-7eef-46ae-8114-1f62a8c7534a",
    "name": "eComm",
    "description": "E-Commerce API - AJ test - v2",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register a new user",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"userId\", jsonData.user.userId)",
                  "",
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// set local variables",
                  "const name = pm.variables.replaceIn('{{$randomFirstName}}')",
                  "const email = pm.variables.replaceIn('{{$randomEmail}}')",
                  "const password = pm.variables.replaceIn('{{$randomPassword}}')",
                  "console.log(name, email, password)",
                  "// set environment variables",
                  "pm.environment.set(\"name\", name)",
                  "pm.environment.set(\"email\", email)",
                  "pm.environment.set(\"password\", password)"
                ]
              }
            }
          ],
          "id": "845b8382-2f44-4bb8-ba85-8ad53caf56d9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "type": "any"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"{{name}}\",\n    \"email\": \"{{email}}\",\n    \"password\": \"{{password}}\",\n    \"phoneNumber: 843\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            },
            "description": "Register a new user"
          },
          "response": [
            {
              "id": "88da56a3-1963-40fe-b0d3-35e28ca45e44",
              "name": "OK",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/register",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "register"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        },
        {
          "name": "Login a user",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Token available as Cookie\", function () {",
                  "    token = pm.cookies.get('token')",
                  "    pm.expect(token).to.not.be.undefined",
                  "});"
                ]
              }
            }
          ],
          "id": "89299335-d577-4046-b935-e9f4ccf940bd",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{email}}\",\n    \"password\": \"{{password}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            },
            "description": "Login a user"
          },
          "response": [
            {
              "id": "05434cf4-e4a9-420b-999f-2e5ab3a1690d",
              "name": "OK",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/auth/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "auth",
                    "login"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        }
      ],
      "id": "d8a4fdff-53fa-4246-9802-fd94745a0639"
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get All Users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 403\", function () {",
                  "    pm.response.to.have.status(403);",
                  "});"
                ]
              }
            }
          ],
          "id": "d6452e63-f6c5-4bf7-967d-c7289501314b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                ""
              ]
            },
            "description": "Get All Users"
          },
          "response": [
            {
              "id": "eb3132ea-ee8a-4c32-ad88-82c2685f7fc3",
              "name": "OK",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    ""
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        },
        {
          "name": "Show Current User",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Validate Schema\", function () {",
                  "    const {user} = pm.response.json();",
                  "    // Check name",
                  "    pm.expect(user).to.have.property('name');",
                  "    pm.expect(user.name).to.be.a(\"string\")",
                  "    // Check userId   ",
                  "    pm.expect(user).to.have.property('userId');",
                  "    pm.expect(user.userId).to.be.a(\"string\")",
                  "    // Check fact",
                  "    pm.expect(user).to.have.property('role');",
                  "    pm.expect(user.role).to.be.a(\"string\")",
                  "});"
                ]
              }
            }
          ],
          "id": "c593011c-4534-44b5-9745-ddbb5cb9bed2",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/showMe",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "showMe"
              ]
            },
            "description": "Show Current User"
          },
          "response": [
            {
              "id": "a3d29570-1ae3-4b8a-b2e4-c38eceb4a13e",
              "name": "OK",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/showMe",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "showMe"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        },
        {
          "name": "Update User",
          "id": "c9eee846-bd55-4211-8f5b-0e2d637e6ed2",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/updateUser",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "updateUser"
              ]
            },
            "description": "Update User"
          },
          "response": [
            {
              "id": "f6f33e40-78ca-4cd2-92fb-502e080ea168",
              "name": "OK",
              "originalRequest": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/updateUser",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "updateUser"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        },
        {
          "name": "Update User Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Validate Schema\", function () {",
                  "    const {msg} = pm.response.json();",
                  "    // Check name",
                  "    pm.expect(msg).to.be.a(\"string\")",
                  "    pm.expect(msg).to.include(\"Success! Password Updated\")",
                  "});"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const newPassword = pm.variables.replaceIn('{{$randomPassword}}')",
                  "pm.variables.set(\"oldPassword\", pm.environment.get('password'))",
                  "pm.environment.set('password', newPassword)"
                ]
              }
            }
          ],
          "id": "5d3fc641-2ac8-4142-b32e-e566277d5440",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"oldPassword\": \"{{oldPassword}}\",\n    \"newPassword\": \"{{password}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/updateUserPassword",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "updateUserPassword"
              ]
            },
            "description": "Update User Password"
          },
          "response": [
            {
              "id": "6545ccca-dfaf-4bc0-8c40-57d089ee23eb",
              "name": "OK",
              "originalRequest": {
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/updateUserPassword",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "updateUserPassword"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        },
        {
          "name": "Get Single User",
          "id": "49f9eb2f-5f92-41cf-9ead-aa112fb0375d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "{{userId}}"
              ]
            },
            "description": "Get Single User"
          },
          "response": [
            {
              "id": "a16942ea-b959-4443-b23c-5e2866be2f6f",
              "name": "OK",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": null
            }
          ]
        }
      ],
      "id": "fd449b34-b7d1-4cdb-bad8-155fa7a43d45"
    },
    {
      "name": "Get base",
      "id": "be900b0a-8162-4b41-9c75-f73f7d99677e",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            ""
          ]
        }
      },
      "response": []
    },
    {
      "name": "Logout a user",
      "id": "dc7e6801-87b5-4c13-b61c-39ce719c263b",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/auth/logout",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "auth",
            "logout"
          ]
        },
        "description": "Logout a user"
      },
      "response": [
        {
          "id": "e2870148-6b6c-4414-97ce-15d52d5a5a07",
          "name": "OK",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "logout"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "text",
          "header": [],
          "cookie": [],
          "responseTime": null,
          "body": null
        }
      ]
    },
    {
      "name": "Get base Copy",
      "id": "969acae2-c7d3-4082-a3e0-8b59ae158143",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            ""
          ]
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "id": "2450ed58-6611-42ab-9d41-63e7e7ef8bdf",
      "key": "baseUrl",
      "value": ""
    }
  ]
}